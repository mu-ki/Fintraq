@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

@{
    var displayName = User.FindFirst("display_name")?.Value;
    displayName ??= User.Identity?.Name;
}

<ul class="navbar-nav auth-nav align-items-lg-center gap-lg-1">
@if (SignInManager.IsSignedIn(User))
{
    <li class="nav-item">
        <a class="nav-link user-chip" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">@displayName</a>
    </li>
    <li class="nav-item">
        <form class="form-inline m-0" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
            <button type="submit" class="btn auth-icon-btn app-btn-secondary" aria-label="Logout" title="Logout">
                <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
                    <path fill="currentColor" d="M16 13v-2H7V8l-5 4 5 4v-3h9Zm3 7H9v-2h10V6H9V4h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2Z" />
                </svg>
            </button>
        </form>
    </li>
}
else
{
    <li class="nav-item">
        <a class="btn auth-icon-btn app-btn-secondary" asp-area="Identity" asp-page="/Account/Register" aria-label="Register" title="Register">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
                <path fill="currentColor" d="M15 14c2.67 0 8 1.33 8 4v2H7v-2c0-2.67 5.33-4 8-4Zm-9-2H4V9H1V7h3V4h2v3h3v2H6v3Zm9 0a4 4 0 1 1 0-8 4 4 0 0 1 0 8Z" />
            </svg>
        </a>
    </li>
    <li class="nav-item">
        <a class="btn auth-icon-btn app-btn-primary auth-icon-light" asp-area="Identity" asp-page="/Account/Login" aria-label="Login" title="Login">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
                <path fill="currentColor" d="M10 17v-3H1v-4h9V7l5 5-5 5Zm4 3v-2h8V6h-8V4h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-8Z" />
            </svg>
        </a>
    </li>
}
</ul>
